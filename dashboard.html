<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gov-Connect Dashboard</title>
    <!-- Added Bootstrap CSS and JS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="./styles.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</head>

<body class="bg-light">
    <div class="container-fluid p-0">
        <div class="row g-0">
            <!-- Converted sidebar to Bootstrap layout -->
            <div class="col-lg-3 col-xl-2 sidebar">
                <div class="p-4 border-bottom">
                    <div class="logo">
                        <div class="logo-shape-1"></div>
                        <div class="logo-shape-2"></div>
                    </div>
                </div>

                <nav class="p-3">
                    <button class="btn menu-item active w-100 d-flex align-items-center gap-2 p-3 mb-2 rounded" data-menu="dashboard">
                        <span>ðŸ“Š</span>
                        DASHBOARD
                    </button>
                    <button class="btn menu-item w-100 d-flex align-items-center gap-2 p-3 mb-2 rounded" data-menu="appointments">
                        <span>ðŸ“…</span>
                        APPOINTMENTS
                    </button>
                    <button class="btn menu-item w-100 d-flex align-items-center gap-2 p-3 mb-2 rounded" data-menu="service-guide">
                        <span>ðŸ“‹</span>
                        SERVICE GUIDE
                    </button>
                    <button class="btn menu-item w-100 d-flex align-items-center gap-2 p-3 mb-2 rounded" data-menu="ai-chatbot">
                        <span>ðŸ¤–</span>
                        AI CHATBOT
                    </button>
                    <button class="btn menu-item w-100 d-flex align-items-center gap-2 p-3 mb-2 rounded" data-menu="my-profile">
                        <span>ðŸ‘¤</span>
                        MY PROFILE
                    </button>
                    <button class="btn menu-item w-100 d-flex align-items-center gap-2 p-3 mb-2 rounded" data-menu="logout">
                        <span>ðŸšª</span>
                        LOGOUT
                    </button>
                </nav>
            </div>

            <!-- Converted main content to Bootstrap layout -->
            <div class="col-lg-9 col-xl-10">
                <!-- Header -->
                <header class="bg-white shadow-sm border-bottom p-4">
                    <div class="d-flex justify-content-between align-items-center">
                        <div class="d-flex align-items-center gap-3">
                            <button class="btn btn-link text-muted p-0 d-lg-none" type="button">
                                <span style="font-size: 20px;">â˜°</span>
                            </button>
                            <h5 class="mb-0 fw-medium">Welcome Sahan !</h5>
                        </div>
                        
                        <div class="d-flex align-items-center gap-3">
                            <div class="text-end">
                                <div class="fw-semibold small">SAHAN PERERA</div>
                                <div class="text-muted" style="font-size: 12px;">sahanperera@gmail.com</div>
                            </div>
                            <div class="bg-dark text-white rounded-circle d-flex align-items-center justify-content-center" style="width: 40px; height: 40px;">
                                <span class="fw-semibold small">SP</span>
                            </div>
                        </div>
                    </div>
                </header>

                <!-- Main Dashboard Content -->
                <main class="p-4">
                    <!-- Dashboard Section -->
                    <div id="dashboard-content" class="content-section active">
                        <div class="mb-4">
                            <h2 class="h3 fw-semibold mb-2">USER DASHBOARD</h2>
                            <div class="bg-dark" style="width: 80px; height: 2px;"></div>
                        </div>

                        <!-- Stats Cards -->
                        <div class="row g-4 mb-5">
                            <div class="col-md-6 col-xl-3">
                                <div class="stats-card p-4 text-center">
                                    <h6 class="text-muted mb-2">TOTAL APPOINTMENTS</h6>
                                    <h2 class="fw-bold mb-0">03</h2>
                                </div>
                            </div>
                            <div class="col-md-6 col-xl-3">
                                <div class="stats-card p-4 text-center">
                                    <h6 class="text-muted mb-2">ONGOING APPOINTMENTS</h6>
                                    <h2 class="fw-bold mb-0">03</h2>
                                </div>
                            </div>
                            <div class="col-md-6 col-xl-3">
                                <div class="stats-card p-4 text-center">
                                    <h6 class="text-muted mb-2">TODAY APPOINTMENTS</h6>
                                    <h2 class="fw-bold mb-0">03</h2>
                                </div>
                            </div>
                            <div class="col-md-6 col-xl-3">
                                <div class="stats-card p-4 text-center">
                                    <h6 class="text-muted mb-2">CANCELED APPOINTMENTS</h6>
                                    <h2 class="fw-bold mb-0">03</h2>
                                </div>
                            </div>
                        </div>

                        <!-- Upcoming Appointments -->
                        <div class="mb-4">
                            <h4 class="fw-semibold mb-4">UPCOMING APPOINTMENTS</h4>
                            
                            <div class="row g-4">
                                <div class="col-12">
                                    <div class="appointment-card p-4">
                                        <div class="d-flex justify-content-between align-items-start">
                                            <div>
                                                <h5 class="fw-semibold mb-2">Apply for New National ID Card</h5>
                                                <p class="text-muted mb-3">Guidelines and requirements for obtaining a new National Identity Card, including necessary documents, eligibility criteria, and application procedures.</p>
                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <small class="text-muted">Department:</small>
                                                        <div class="fw-medium">Civil Registration Department</div>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <small class="text-muted">Last Updated:</small>
                                                        <div class="fw-medium">2022.03.25</div>
                                                    </div>
                                                </div>
                                            </div>
                                            <button class="btn btn-teal">VIEW GUIDE</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Appointments Content -->
                    <div id="appointments-content" class="content-section">
                        <div class="d-flex justify-content-between align-items-center mb-4">
                            <h2 class="h3 fw-semibold mb-0">APPOINTMENTS</h2>
                            <button class="btn btn-teal d-flex align-items-center gap-2">
                                <span>+</span>
                                NEW APPOINTMENT
                            </button>
                        </div>

                        <div class="row g-4">
                            <div class="col-md-6">
                                <div class="appointment-card p-4">
                                    <div class="row row-cols-2 g-3 mb-3">
                                        <div>
                                            <small class="text-muted">Appointment Id</small>
                                            <div class="fw-medium">2569470001</div>
                                        </div>
                                        <div>
                                            <small class="text-muted">Service</small>
                                            <div class="fw-medium">National ID Renewal</div>
                                        </div>
                                        <div>
                                            <small class="text-muted">Department</small>
                                            <div class="fw-medium">Civil Registration Department</div>
                                        </div>
                                        <div>
                                            <small class="text-muted">Branch</small>
                                            <div class="fw-medium">Central Government Office</div>
                                        </div>
                                        <div>
                                            <small class="text-muted">Date</small>
                                            <div class="fw-medium">2025-08-12</div>
                                        </div>
                                        <div>
                                            <small class="text-muted">Time Slot</small>
                                            <div class="fw-medium">09:00am -10:00am</div>
                                        </div>
                                        <div>
                                            <small class="text-muted">Queue Number</small>
                                            <div class="fw-medium">004</div>
                                        </div>
                                    </div>
                                    <div class="d-flex gap-2">
                                        <button class="btn btn-secondary w-50">Cancel Appointment</button>
                                        <button class="btn btn-teal w-50">View Barcode</button>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-6">
                                <div class="appointment-card p-4">
                                    <div class="row row-cols-2 g-3 mb-3">
                                        <div>
                                            <small class="text-muted">Appointment Id</small>
                                            <div class="fw-medium">2569470002</div>
                                        </div>
                                        <div>
                                            <small class="text-muted">Service</small>
                                            <div class="fw-medium">Passport Renewal</div>
                                        </div>
                                        <div>
                                            <small class="text-muted">Department</small>
                                            <div class="fw-medium">Passport Department</div>
                                        </div>
                                        <div>
                                            <small class="text-muted">Branch</small>
                                            <div class="fw-medium">East Branch Office</div>
                                        </div>
                                        <div>
                                            <small class="text-muted">Date</small>
                                            <div class="fw-medium">2025-08-15</div>
                                        </div>
                                        <div>
                                            <small class="text-muted">Time Slot</small>
                                            <div class="fw-medium">10:00am -11:00am</div>
                                        </div>
                                        <div>
                                            <small class="text-muted">Queue Number</small>
                                            <div class="fw-medium">005</div>
                                        </div>
                                    </div>
                                    <div class="d-flex gap-2">
                                        <button class="btn btn-secondary w-50">Cancel Appointment</button>
                                        <button class="btn btn-teal w-50">View Barcode</button>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-6">
                                <div class="appointment-card p-4">
                                    <div class="row row-cols-2 g-3 mb-3">
                                        <div>
                                            <small class="text-muted">Appointment Id</small>
                                            <div class="fw-medium">2569470003</div>
                                        </div>
                                        <div>
                                            <small class="text-muted">Service</small>
                                            <div class="fw-medium">Driver's License Renewal</div>
                                        </div>
                                        <div>
                                            <small class="text-muted">Department</small>
                                            <div class="fw-medium">Transport Department</div>
                                        </div>
                                        <div>
                                            <small class="text-muted">Branch</small>
                                            <div class="fw-medium">West Branch Office</div>
                                        </div>
                                        <div>
                                            <small class="text-muted">Date</small>
                                            <div class="fw-medium">2025-08-18</div>
                                        </div>
                                        <div>
                                            <small class="text-muted">Time Slot</small>
                                            <div class="fw-medium">11:00am -12:00pm</div>
                                        </div>
                                        <div>
                                            <small class="text-muted">Queue Number</small>
                                            <div class="fw-medium">006</div>
                                        </div>
                                    </div>
                                    <div class="d-flex gap-2">
                                        <button class="btn btn-secondary w-50">Cancel Appointment</button>
                                        <button class="btn btn-teal w-50">View Barcode</button>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-6">
                                <div class="appointment-card p-4">
                                    <div class="row row-cols-2 g-3 mb-3">
                                        <div>
                                            <small class="text-muted">Appointment Id</small>
                                            <div class="fw-medium">2569470004</div>
                                        </div>
                                        <div>
                                            <small class="text-muted">Service</small>
                                            <div class="fw-medium">Vehicle Registration</div>
                                        </div>
                                        <div>
                                            <small class="text-muted">Department</small>
                                            <div class="fw-medium">Transport Department</div>
                                        </div>
                                        <div>
                                            <small class="text-muted">Branch</small>
                                            <div class="fw-medium">North Branch Office</div>
                                        </div>
                                        <div>
                                            <small class="text-muted">Date</small>
                                            <div class="fw-medium">2025-08-20</div>
                                        </div>
                                        <div>
                                            <small class="text-muted">Time Slot</small>
                                            <div class="fw-medium">12:00pm -01:00pm</div>
                                        </div>
                                        <div>
                                            <small class="text-muted">Queue Number</small>
                                            <div class="fw-medium">007</div>
                                        </div>
                                    </div>
                                    <div class="d-flex gap-2">
                                        <button class="btn btn-secondary w-50">Cancel Appointment</button>
                                        <button class="btn btn-teal w-50">View Barcode</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Added New Appointment Modal -->
                    <!-- New Appointment Modal -->
                    <div id="newAppointmentModal" class="modal-overlay" style="display: none;">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h3 class="modal-title">New Appointment</h3>
                                <button class="modal-close" onclick="closeNewAppointmentModal()">&times;</button>
                            </div>
                            <div class="modal-body">
                                <form id="newAppointmentForm">
                                    <div class="form-group">
                                        <select class="form-control" id="service" required>
                                            <option value="">Service</option>
                                            <option value="national-id">National ID Renewal</option>
                                            <option value="passport">Passport Application</option>
                                            <option value="drivers-license">Driver's License</option>
                                            <option value="vehicle-registration">Vehicle Registration</option>
                                        </select>
                                    </div>
                                    
                                    <div class="form-group">
                                        <select class="form-control" id="department" required>
                                            <option value="">Department</option>
                                            <option value="civil-registration">Civil Registration Department</option>
                                            <option value="passport-dept">Passport Department</option>
                                            <option value="transport">Transport Department</option>
                                        </select>
                                    </div>
                                    
                                    <div class="form-group">
                                        <select class="form-control" id="branch" required>
                                            <option value="">Branch</option>
                                            <option value="central">Central Government Office</option>
                                            <option value="east">East Branch Office</option>
                                            <option value="west">West Branch Office</option>
                                            <option value="north">North Branch Office</option>
                                        </select>
                                    </div>
                                    
                                    <div class="form-group">
                                        <div class="date-input-wrapper">
                                            <input type="date" class="form-control" id="date" required>
                                            <i class="fas fa-calendar-alt date-icon"></i>
                                        </div>
                                    </div>
                                    
                                    <div class="form-group">
                                        <select class="form-control" id="timeSlot" required>
                                            <option value="">Time Slot</option>
                                            <option value="09:00-10:00">09:00am - 10:00am</option>
                                            <option value="10:00-11:00">10:00am - 11:00am</option>
                                            <option value="11:00-12:00">11:00am - 12:00pm</option>
                                            <option value="12:00-13:00">12:00pm - 01:00pm</option>
                                            <option value="14:00-15:00">02:00pm - 03:00pm</option>
                                            <option value="15:00-16:00">03:00pm - 04:00pm</option>
                                        </select>
                                    </div>
                                    
                                    <div class="queue-number">
                                        <strong>Approx Queue Number: <span id="queueNumber">12</span></strong>
                                    </div>
                                    
                                    <button type="submit" class="btn btn-teal btn-create">CREATE APPOINTMENT</button>
                                </form>
                                
                                <div class="disclaimer">
                                    <small>Please Be Aware That Poya Days, Public Holidays, Bank Holidays, And Mercantile Holidays Are Excluded From Regular Scheduling. We Are Not Responsible For Any Issues Arising From Appointments Made On These Days.</small>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Service Guide Content -->
                    <div id="service-guide-content" class="content-section">
                        <div class="d-flex justify-content-between align-items-center mb-4">
                            <h2 class="h3 fw-semibold mb-0">SERVICE GUIDE</h2>
                        </div>

                        <div class="bg-white p-4 rounded shadow-sm mb-4">
                            <div class="row g-3">
                                <div class="col-md-6">
                                    <input type="search" class="form-control" placeholder="Search...">
                                </div>
                                <div class="col-md-6">
                                    <select class="form-select">
                                        <option>CIVIL REGISTRATION DEPARTMENT</option>
                                        <option>HEALTH DEPARTMENT</option>
                                        <option>EDUCATION DEPARTMENT</option>
                                        <option>TRANSPORT DEPARTMENT</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="row g-4">
                            <div class="col-12">
                                <div class="service-item p-4">
                                    <div class="d-flex justify-content-between align-items-start">
                                        <div>
                                            <h5 class="fw-semibold mb-2">Apply for New National ID Card</h5>
                                            <p class="text-muted mb-3">Guidelines and requirements for obtaining a new National Identity Card, including necessary documents, eligibility criteria, and application procedures.</p>
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <small class="text-muted">Department:</small>
                                                    <div class="fw-medium">Civil Registration Department</div>
                                                </div>
                                                <div class="col-md-6">
                                                    <small class="text-muted">Last Updated:</small>
                                                    <div class="fw-medium">2022.03.25</div>
                                                </div>
                                            </div>
                                        </div>
                                        <button class="btn btn-teal">VIEW GUIDE</button>
                                    </div>
                                </div>
                            </div>
                            <div class="col-12">
                                <div class="service-item p-4">
                                    <div class="d-flex justify-content-between align-items-start">
                                        <div>
                                            <h5 class="fw-semibold mb-2">Apply for New National ID Card</h5>
                                            <p class="text-muted mb-3">Guidelines and requirements for obtaining a new National Identity Card, including necessary documents, eligibility criteria, and application procedures.</p>
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <small class="text-muted">Department:</small>
                                                    <div class="fw-medium">Civil Registration Department</div>
                                                </div>
                                                <div class="col-md-6">
                                                    <small class="text-muted">Last Updated:</small>
                                                    <div class="fw-medium">2022.03.25</div>
                                                </div>
                                            </div>
                                        </div>
                                        <button class="btn btn-teal">VIEW GUIDE</button>
                                    </div>
                                </div>
                            </div>
                            <div class="col-12">
                                <div class="service-item p-4">
                                    <div class="d-flex justify-content-between align-items-start">
                                        <div>
                                            <h5 class="fw-semibold mb-2">Apply for New National ID Card</h5>
                                            <p class="text-muted mb-3">Guidelines and requirements for obtaining a new National Identity Card, including necessary documents, eligibility criteria, and application procedures.</p>
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <small class="text-muted">Department:</small>
                                                    <div class="fw-medium">Civil Registration Department</div>
                                                </div>
                                                <div class="col-md-6">
                                                    <small class="text-muted">Last Updated:</small>
                                                    <div class="fw-medium">2022.03.25</div>
                                                </div>
                                            </div>
                                        </div>
                                        <button class="btn btn-teal">VIEW GUIDE</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- AI Chatbot Content -->
                   <div id="ai-chatbot-content" class="content-section">
                        <div class="d-flex flex-column h-100">
                            <div class="text-center mb-4">
                                <h2 class="h3 fw-semibold">AI CHATBOT</h2>
                                <div class="underline mx-auto"></div>
                            </div>
                            
                            <!-- Added chat interface with conversation history -->
                            <div class="chat-container flex-grow-1 d-flex flex-column">
                                <div class="chat-messages flex-grow-1 overflow-auto p-3" style="max-height: 500px;">
                                    <!-- User Message -->
                                    <div class="message-wrapper d-flex justify-content-end mb-3">
                                        <div class="user-message bg-light p-3 rounded" style="max-width: 70%;">
                                            <p class="mb-1">Hi, I need help with getting a passport.</p>
                                            <small class="text-muted">22:25</small>
                                        </div>
                                    </div>
                                    
                                    <!-- AI Response -->
                                    <div class="message-wrapper d-flex justify-content-start mb-3">
                                        <div class="ai-message bg-white p-3 rounded border" style="max-width: 70%;">
                                            <p class="mb-1">Hello! I can help you with that. Are you looking to apply for a new passport or renew an existing one?</p>
                                            <small class="text-muted">22:25</small>
                                        </div>
                                    </div>
                                    
                                    <!-- User Message -->
                                    <div class="message-wrapper d-flex justify-content-end mb-3">
                                        <div class="user-message bg-light p-3 rounded" style="max-width: 70%;">
                                            <p class="mb-1">I want to apply for a new passport.</p>
                                            <small class="text-muted">22:26</small>
                                        </div>
                                    </div>
                                    
                                    <!-- AI Response -->
                                    <div class="message-wrapper d-flex justify-content-start mb-3">
                                        <div class="ai-message bg-white p-3 rounded border" style="max-width: 70%;">
                                            <p class="mb-1">Great! You will need to submit proof of identity, proof of citizenship, and a recent photo. Would you like me to guide you through the application process?</p>
                                            <small class="text-muted">22:27</small>
                                        </div>
                                    </div>
                                    
                                    <!-- User Message -->
                                    <div class="message-wrapper d-flex justify-content-end mb-3">
                                        <div class="user-message bg-light p-3 rounded" style="max-width: 70%;">
                                            <p class="mb-1">Yes, please.</p>
                                            <small class="text-muted">22:29</small>
                                        </div>
                                    </div>
                                    
                                    <!-- AI Response -->
                                    <div class="message-wrapper d-flex justify-content-start mb-3">
                                        <div class="ai-message bg-white p-3 rounded border" style="max-width: 70%;">
                                            <div class="mb-1">
                                                <p class="mb-2">Step 1: Fill out the online application form <a href="#" class="text-decoration-none" style="color: #20b2aa;">here</a>.</p>
                                                <p class="mb-2">Step 2: Upload scanned copies of your documents.</p>
                                                <p class="mb-2">Step 3: Schedule an appointment at the nearest passport office.</p>
                                                <p class="mb-0">Would you like me to help you schedule the appointment now?</p>
                                            </div>
                                            <small class="text-muted">22:27</small>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Added chat input area -->
                                <div class="chat-input-area p-3 border-top">
                                    <div class="input-group">
                                        <input type="text" class="form-control" placeholder="ASK ANYTHING..." id="chatInput">
                                        <button class="btn btn-dark" type="button" id="sendButton">
                                            <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                                                <path d="M15.854.146a.5.5 0 0 1 .11.54L13.026 8.5l2.938 7.814a.5.5 0 0 1-.11.54.5.5 0 0 1-.54.11L1.5 8.5l13.814-8.464a.5.5 0 0 1 .54.11z"/>
                                            </svg>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- My Profile Content -->
                    <div id="my-profile-content" class="content-section">
                        <div class="text-center">
                            <div class="profile-avatar">
                                <span class="fw-semibold">SP</span>
                            </div>
                            <h2 class="h3 fw-semibold mb-4">SAHAN PERERA</h2>
                        </div>

                        <div class="row justify-content-center">
                            <div class="col-md-8 col-lg-6">
                                <div class="mb-3">
                                    <label class="form-label">First Name</label>
                                    <input type="text" class="form-control" value="Sahan">
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Last Name</label>
                                    <input type="text" class="form-control" value="Perera">
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">NIC</label>
                                    <input type="text" class="form-control" value="200012345678">
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Mobile Number</label>
                                    <input type="tel" class="form-control" value="+94771234567">
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Email Address</label>
                                    <input type="email" class="form-control" value="sahan@example.com">
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Password</label>
                                    <input type="password" class="form-control" value="password">
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Retype Password</label>
                                    <input type="password" class="form-control" value="password">
                                </div>
                                <div class="d-flex gap-2">
                                    <button class="btn btn-secondary w-50">RESET DETAILS</button>
                                    <button class="btn btn-teal w-50">UPDATE DETAILS</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </main>
            </div>
        </div>
    </div>

    <script>
        // Navigation functionality
        document.addEventListener('DOMContentLoaded', function() {
            const menuItems = document.querySelectorAll('.menu-item');
            const contentSections = document.querySelectorAll('.content-section');

            menuItems.forEach(item => {
                item.addEventListener('click', function() {
                    const targetMenu = this.getAttribute('data-menu');
                    
                    // Remove active class from all menu items
                    menuItems.forEach(menuItem => {
                        menuItem.classList.remove('active');
                    });
                    
                    // Add active class to clicked item
                    this.classList.add('active');
                    
                    // Hide all content sections
                    contentSections.forEach(section => {
                        section.classList.remove('active');
                    });
                    
                    // Show target content section
                    const targetSection = document.getElementById(targetMenu + '-content');
                    if (targetSection) {
                        targetSection.classList.add('active');
                    }
                });
            });

            const chatInput = document.getElementById('chatInput');
            const sendButton = document.getElementById('sendButton');
            const chatMessages = document.querySelector('.chat-messages');

            function sendMessage() {
                const message = chatInput.value.trim();
                if (message === '') return;

                // Get current time
                const now = new Date();
                const timeString = now.getHours().toString().padStart(2, '0') + ':' + 
                                 now.getMinutes().toString().padStart(2, '0');

                // Create user message element
                const userMessageHTML = `
                    <div class="message-wrapper d-flex justify-content-end mb-3">
                        <div class="user-message bg-light p-3 rounded" style="max-width: 70%;">
                            <p class="mb-1">${message}</p>
                            <small class="text-muted">${timeString}</small>
                        </div>
                    </div>
                `;

                // Add user message to chat
                chatMessages.insertAdjacentHTML('beforeend', userMessageHTML);

                // Clear input
                chatInput.value = '';

                // Scroll to bottom
                chatMessages.scrollTop = chatMessages.scrollHeight;

                // Simulate AI response after a short delay
                setTimeout(() => {
                    const aiResponseHTML = `
                        <div class="message-wrapper d-flex justify-content-start mb-3">
                            <div class="ai-message bg-white p-3 rounded border" style="max-width: 70%;">
                                <p class="mb-1">Thank you for your message. I'm here to help you with government services. How can I assist you today?</p>
                                <small class="text-muted">${timeString}</small>
                            </div>
                        </div>
                    `;
                    chatMessages.insertAdjacentHTML('beforeend', aiResponseHTML);
                    chatMessages.scrollTop = chatMessages.scrollHeight;
                }, 1000);
            }

            // Send message on button click
            sendButton.addEventListener('click', sendMessage);

            // Send message on Enter key press
            chatInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    sendMessage();
                }
            });

            function openNewAppointmentModal() {
                document.getElementById('newAppointmentModal').style.display = 'flex';
                updateQueueNumber();
            }

            function closeNewAppointmentModal() {
                document.getElementById('newAppointmentModal').style.display = 'none';
                document.getElementById('newAppointmentForm').reset();
            }

            function updateQueueNumber() {
                const queueNumber = Math.floor(Math.random() * 20) + 10;
                document.getElementById('queueNumber').textContent = queueNumber;
            }

            // Handle form submission
            document.getElementById('newAppointmentForm').addEventListener('submit', function(e) {
                e.preventDefault();
                
                // Get form values
                const service = document.getElementById('service').value;
                const department = document.getElementById('department').value;
                const branch = document.getElementById('branch').value;
                const date = document.getElementById('date').value;
                const timeSlot = document.getElementById('timeSlot').value;
                
                if (service && department && branch && date && timeSlot) {
                    alert('Appointment created successfully!');
                    closeNewAppointmentModal();
                } else {
                    alert('Please fill in all fields.');
                }
            });

            // Close modal when clicking outside
            document.getElementById('newAppointmentModal').addEventListener('click', function(e) {
                if (e.target === this) {
                    closeNewAppointmentModal();
                }
            });
        });
    </script>
</body>
</html>
